<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Viotagger</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <!-- üîù Top Panel -->
  <div id="top-panel">
   <div id="top-title">Violation Tagging Tool</div>
    <div class="control-panel">
      <label for="loadImage" class="button">üìÅ Load Image</label>
      <input type="file" id="loadImage" accept=".png,.jpg,.jpeg" style="display:none" />
      <button id="exportCSV" class="button">üì§ Export CSV</button>
      <button id="toggleMultiSelect" class="button">üîò Multi: OFF</button>
      <button id="deleteSelected" class="button">üóëÔ∏è Delete Selected</button>
      <button id="clearImageData" class="button">üßπ Clear Image Data</button>
      <button id="clearAllData" class="button">üßπ Clear ALL Data</button>
      <button id="saveProgress" class="button">üíæ Save Progress</button>
      <button id="syncAirtable" class="button">üì° Sync to Airtable</button>

<select id="modeSelector" class="button" style="width:auto; padding:6px 10px; height:34px;">
  <option value="sample">üß™ Sample Mode</option>
  <option value="final">‚úÖ Final Mode</option>
</select>




    </div>
    <div id="status-message"></div>
  </div>

  <!-- ‚¨á Main Wrapper: Left + Center + Right -->
  <div id="main-wrapper">
    <!-- üß† Left Panel: Hints + Log -->
    <div id="left-panel">
      <div id="sidebar-hints">
        <!-- What to Look For (EQ) -->
      </div>
      <div id="tag-log">
        <!-- Saved tag summaries -->
      </div>
    </div>

    <!-- üéØ Center Panel: Image Canvas -->
    <div id="image-viewer">
      <div id="image-container">
  <div class="image-placeholder-text">
    <strong>Select a Bureau and Creditor</strong>
    to begin VioTagging!
  </div>
  <img id="report-img" src="" alt="" /> <!-- Removed alt text -->
  <!-- Drawn boxes go here -->
</div>
    </div>

<!-- üìã Right Panel: Radio Buttons for Bureau and Creditor -->
<div id="right-panel">
  <div id="selector-panel">
    <!-- üìå Bureau Selection (Radio Buttons) -->
    <label><input type="radio" name="bureau" value="Equifax" id="equifaxRadio"> Equifax</label>
    <label><input type="radio" name="bureau" value="Experian" id="experianRadio"> Experian</label>
    <label><input type="radio" name="bureau" value="TransUnion" id="transunionRadio"> TransUnion</label>

    <!-- üè¶ Creditor Selection (2-letter visible labels, 4-column grid) -->
    <div id="creditorRadioGroup" class="creditor-grid-4col">
      <div class="creditor-column">
        <label><input type="radio" name="creditor" value="AL"> AL</label>
        <label><input type="radio" name="creditor" value="BB"> BB</label>
        <label><input type="radio" name="creditor" value="BK"> BK</label>
        <label><input type="radio" name="creditor" value="BY"> BY</label>
      </div>
      <div class="creditor-column">
        <label><input type="radio" name="creditor" value="C1"> C1</label>
        <label><input type="radio" name="creditor" value="C2"> C2</label>
        <label><input type="radio" name="creditor" value="CR"> CR</label>
      </div>
      <div class="creditor-column">
        <label><input type="radio" name="creditor" value="DB"> DB</label>
        <label><input type="radio" name="creditor" value="DL"> DL</label>
        <label><input type="radio" name="creditor" value="HD"> HD</label>
      </div>
      <div class="creditor-column">
        <label><input type="radio" name="creditor" value="JP"> JP</label>
        <label><input type="radio" name="creditor" value="MF"> MF</label>
        <label><input type="radio" name="creditor" value="SR"> SR</label>
      </div>
    </div>

    <!-- üìÖ Date Selection -->
    <div id="dateGroup" class="date-button-group" style="display: none;">
      <div id="dateLabel" style="margin-bottom: 8px; font-weight: bold;">Date + Page:</div>
      <div id="dateButtons" class="date-grid"></div>
    </div>

<!-- üîΩ Popup Dropdown for Tagging -->
<div id="popup">
  <select id="violationPreset">
    <option disabled selected>Select a violation</option>
  </select>

  <label style="display: block; font-size: 13px; margin-top: 6px;">
    <input type="checkbox" id="sofCheckbox" />
    Mark as SOF (Sign-Off)
  </label>

  <button id="saveTag">‚úÖ Save Tag</button>
  <button id="cancelTag">‚ùå Cancel</button>
</div>




<!-- Edit Box Modal (Updated) -->
<div id="editBoxModal" class="modal">
  <div class="modal-content">
    <h3>Edit Violation Box</h3>
    
    <!-- Coordinates row -->
    <div class="coords-row">
      <div class="form-group compact">
        <label>X:</label>
        <input type="number" id="editBoxX" class="coord-input">
      </div>
      <div class="form-group compact">
        <label>Y:</label>
        <input type="number" id="editBoxY" class="coord-input">
      </div>
      <div class="form-group compact">
        <label>W:</label>
        <input type="number" id="editBoxW" class="coord-input">
      </div>
      <div class="form-group compact">
        <label>H:</label>
        <input type="number" id="editBoxH" class="coord-input">
      </div>
    </div>
    
    <!-- Violation dropdown -->
    <div class="form-group">
      <label>Violation:</label>
      <select id="editBoxViolation" class="violation-dropdown"></select>
    </div>
    
    <!-- Sign-off checkbox -->
    <div class="form-group checkbox-group">
      <label>
        <input type="checkbox" id="editBoxSignOff">
        Sign-Off
      </label>
    </div>
    
    <div class="modal-actions">
      <button id="editBoxCancel" class="button">Cancel</button>
      <button id="editBoxConfirm" class="button button-primary">OK</button>
    </div>
  </div>
</div>



<!-- üîç Export Preview Modal -->
<div id="previewModal" class="modal">
  <div class="modal-content" style="max-height: 80vh; overflow-y: auto;">
    <h3>Preview Tags Before Export</h3>
    <p style="font-size: 13px; margin-bottom: 12px;">
      Below is a preview of all tags currently in memory.<br>
      Are you sure you want to proceed with export or sync?
    </p>
    <table id="previewTable" style="width:100%; font-size: 12px; border-collapse: collapse;">
      <thead>
        <tr>
          <th style="border-bottom: 1px solid #ccc; text-align: left;">Image</th>
          <th style="border-bottom: 1px solid #ccc; text-align: left;">Severity</th>
          <th style="border-bottom: 1px solid #ccc; text-align: left;">Label</th>
          <th style="border-bottom: 1px solid #ccc; text-align: left;">Codes</th>
          <th style="border-bottom: 1px solid #ccc; text-align: left;">Mode</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
    <div class="modal-actions" style="margin-top: 20px;">
      <button id="previewCancel" class="button">Cancel</button>
      <button id="previewConfirm" class="button button-primary">Yes, Proceed</button>
    </div>
  </div>
</div>

<script src="hintLookup.js"></script>
<script src="imageMap.js"></script>
<script src="script.js"></script>
<script src="airtable.js"></script>


</body>
</html>
